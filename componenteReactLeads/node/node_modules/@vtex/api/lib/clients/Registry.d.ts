/// <reference types="node" />
import { IncomingMessage } from 'http';
import { Readable, Writable } from 'stream';
import { ZlibOptions } from 'zlib';
import { InfraClient, InstanceOptions } from '../HttpClient';
import { AppBundlePublished, AppFilesList, AppManifest } from '../responses';
import { IOContext } from '../service/typings';
export declare class Registry extends InfraClient {
    constructor(context: IOContext, options?: InstanceOptions);
    publishApp: (files: File[], tag?: string | undefined, { zlib }?: ZipOptions) => Promise<AppBundlePublished>;
    publishAppRc: (files: File[], tag?: string | undefined, { zlib }?: ZipOptions) => Promise<AppBundlePublished>;
    private publish;
    listApps: () => Promise<RegistryAppsList>;
    listVersionsByApp: (app: string) => Promise<RegistryAppVersionsList>;
    deprecateApp: (app: string, version: string) => Promise<void>;
    undeprecateApp: (app: string, version: string) => Promise<void>;
    validateApp: (app: string, version: string) => Promise<void>;
    getAppManifest: (app: string, version: string, opts?: AppsManifestOptions | undefined) => Promise<AppManifest>;
    listAppFiles: (app: string, version: string, opts?: ListAppFilesOptions | undefined) => Promise<AppFilesList>;
    getAppFile: (app: string, version: string, path: string) => Promise<{
        data: Buffer;
        headers: any;
    }>;
    getAppJSON: <T extends object | null>(app: string, version: string, path: string, nullIfNotFound?: boolean | undefined) => Promise<T>;
    getAppFileStream: (app: string, version: string, path: string) => Promise<IncomingMessage>;
    getAppBundle: (app: string, version: string, bundlePath: string, generatePackageJson: boolean) => Promise<Readable>;
    unpackAppBundle: (app: string, version: string, bundlePath: string, unpackPath: string, generatePackageJson: boolean) => Promise<Writable>;
    resolveDependenciesWithManifest: (manifest: AppManifest, filter?: string) => Promise<Record<string, string[]>>;
}
interface ZipOptions {
    zlib?: ZlibOptions;
}
export interface AppsManifestOptions {
    resolveDeps: boolean;
}
export interface ListAppFilesOptions {
    prefix: string;
}
export interface RegistryAppsListItem {
    partialIdentifier: string;
    location: string;
}
export interface RegistryAppsList {
    data: RegistryAppsListItem[];
}
export interface RegistryAppVersionsListItem {
    versionIdentifier: string;
    location: string;
}
export interface RegistryAppVersionsList {
    data: RegistryAppVersionsListItem[];
}
export interface File {
    path: string;
    content: any;
}
export {};
