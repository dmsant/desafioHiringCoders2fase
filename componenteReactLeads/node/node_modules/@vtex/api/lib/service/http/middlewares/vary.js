"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const constants_1 = require("../../../constants");
async function vary(ctx, next) {
    const { method } = ctx;
    // We don't need to vary non GET requests, since they are never cached
    if (method.toUpperCase() !== 'GET') {
        await next();
        return;
    }
    ctx.vary(constants_1.LOCALE_HEADER);
    if (ctx.get(constants_1.SEGMENT_HEADER)) {
        ctx.vary(constants_1.SEGMENT_HEADER);
    }
    if (ctx.get(constants_1.SESSION_HEADER)) {
        ctx.vary(constants_1.SESSION_HEADER);
    }
    await next();
}
exports.vary = vary;
